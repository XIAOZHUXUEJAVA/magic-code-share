<!DOCTYPE html>
<html>
  <head>
    <title>Generate Favicon</title>
  </head>
  <body>
    <canvas id="canvas" width="32" height="32"></canvas>
    <script>
      const canvas = document.getElementById("canvas");
      const ctx = canvas.getContext("2d");

      // 创建渐变背景
      const gradient = ctx.createLinearGradient(0, 0, 32, 32);
      gradient.addColorStop(0, "#6366f1");
      gradient.addColorStop(1, "#8b5cf6");

      // 绘制背景
      ctx.fillStyle = gradient;
      ctx.roundRect(0, 0, 32, 32, 6);
      ctx.fill();

      // 绘制代码窗口
      ctx.fillStyle = "rgba(255, 255, 255, 0.9)";
      ctx.roundRect(4, 6, 24, 16, 2);
      ctx.fill();

      // 绘制窗口控制按钮
      ctx.fillStyle = "#ff5f57";
      ctx.beginPath();
      ctx.arc(7, 9, 1, 0, 2 * Math.PI);
      ctx.fill();

      ctx.fillStyle = "#ffbd2e";
      ctx.beginPath();
      ctx.arc(10, 9, 1, 0, 2 * Math.PI);
      ctx.fill();

      ctx.fillStyle = "#28ca42";
      ctx.beginPath();
      ctx.arc(13, 9, 1, 0, 2 * Math.PI);
      ctx.fill();

      // 绘制代码行
      ctx.fillStyle = "rgba(99, 102, 241, 0.7)";
      ctx.roundRect(6, 12, 8, 1.5, 0.5);
      ctx.fill();

      ctx.fillStyle = "rgba(139, 92, 246, 0.6)";
      ctx.roundRect(6, 14.5, 12, 1.5, 0.5);
      ctx.fill();

      ctx.fillStyle = "rgba(99, 102, 241, 0.5)";
      ctx.roundRect(6, 17, 6, 1.5, 0.5);
      ctx.fill();

      // 绘制魔法星星
      ctx.fillStyle = "#fbbf24";
      ctx.font = "8px Arial";
      ctx.fillText("✨", 22, 12);
      ctx.fillText("✨", 24, 20);
      ctx.fillText("✨", 20, 26);

      // 绘制分享箭头
      ctx.strokeStyle = "rgba(255, 255, 255, 0.8)";
      ctx.lineWidth = 1.5;
      ctx.lineCap = "round";
      ctx.lineJoin = "round";

      ctx.beginPath();
      ctx.moveTo(18, 24);
      ctx.lineTo(20, 22);
      ctx.lineTo(18, 20);
      ctx.moveTo(20, 22);
      ctx.lineTo(14, 22);
      ctx.stroke();

      // 下载为ICO
      canvas.toBlob(function (blob) {
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "favicon.ico";
        a.click();
      });
    </script>
  </body>
</html>
